# Function which gets called after running command finishes and before prompt is drown
function prompt_zshgod_precmd() {
	# Snippet used for prompt_zshgod_exectime function
	(( ${+ZSHGOD_EXECTIME_START} )) || unset ZSHGOD_EXECTIME && return
	ZSHGOD_EXECTIME=$(( EPOCHSECONDS - ZSHGOD_EXECTIME_START ))
	unset ZSHGOD_EXECTIME_START

	# Code to update prompt related stuff asynchronously
	async_start_worker zshgod_async-worker
	async_register_callback zshgod_async-worker prompt_zshgod_async-callback

	for async_work in "${ZSHGOD_LEFT_PROMPT[@]}"; do
		async_job zshgod_async-worker "$async_work"
	done
}
