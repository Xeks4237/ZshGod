# Function which returns verbose git info formatted shortly
function prompt_zshgod_right-to-left_git_info() {
	# Allow passing args to function for changing foreground and background colors
	local bg_color=$1
	local fg_color_staged_count=$2
	local fg_color_modified_count=$3
	local fg_color_deleted_count=$4
	local fg_color_untracked_count=$5
	local fg_color_ahead_count=$6

	# Check if we're in a git repo
	[[ $(prompt_zshgod_vcs_system) == 'git' ]] || return

	# Fetch machine-readable git status with branch info (includes ahead/behind)
	local git_info="$(command git status --porcelain --branch 2>/dev/null)"

	# If nothing to report (repo clean), output nothing
	[[ -z "$git_info" ]] && return

	# Extract the branch line (starts with "##")
	local branch_line=$(echo "$git_info" | grep "^##")

	# Count how many commits are ahead of upstream (not pushed)
	local ahead_count=0
	[[ $branch_line =~ "ahead ([0-9]+)" ]] && ahead_count=${match[1]}

	# Remove branch line to leave only file status lines
	local status_lines=$(echo "$git_info" | grep -v "^##")

	# Count staged changes (new files added, modifications staged, deletes staged, etc.)
	local staged_count=$(echo "$status_lines" | grep -c "^[MADRC] ")

	# Count unstaged modifications to tracked files
	local modified_count=$(echo "$status_lines" | grep -c "^ [MAD] ")

	# Count deleted files (staged + unstaged deletes)
	local deleted_count=$(( $(echo "$status_lines" | grep -c "^[D] ") + $(echo "$status_lines" | grep -c "^ [D] ") ))

	# Count untracked/new files
	local untracked_count=$(echo "$status_lines" | grep -c "^?? ")

	# Build the output parts only if the count is greater than 0
	local parts=()

	# Check if staged count is zero or not and add it to the parts[] array
	(( staged_count > 0 )) && parts+=("%K{$fg_color_staged_count}${staged_count}+%k")

	# Check if modified count is zero or not and add it to the parts[] array
	(( modified_count > 0 )) && parts+=("%K{$fg_color_modified_count}${modified_count}*%k")

	# Check if deleted count is zero or not and add it to the parts[] array
	(( deleted_count > 0 )) && parts+=("%K{$fg_color_deleted_count}${deleted_count}-%k")

	# Check if untracked count is zero or not and add it to the parts[] array
	(( untracked_count > 0 )) && parts+=("%K{$fg_color_untracked_count}${untracked_count}?%k")

	# Check if ahead count is zero or not and add it to the parts[] array
	(( ahead_count > 0 )) && parts+=("%K{$fg_color_ahead_count}${ahead_count}↑%k")

	# If there's anything to show, join the parts and do some customization
	(( ${#parts[@]} > 0 )) && PROMPT_ZSHGOD_RIGHT_TO_LEFT_GIT_INFO="%F{$bg_color}%S ${parts[*]} %s%f"
}
